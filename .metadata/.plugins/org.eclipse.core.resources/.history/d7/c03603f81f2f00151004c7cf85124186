<%--

  MainChallComp component.

  Main Challenge Component

--%><%
%><%@include file="/libs/foundation/global.jsp"%><%
%><%@page session="false" %><%
%><%
	// TODO add you code here
%>
<html>
    <head>
  		<cq:includeClientLib categories="cq.jquery"/>
    	<script>
    		var actual=0;
    		var max='&lt;%=properties.get("max", -1)%&gt;';
    		$(window).ready(function() {
    			loadPage();
    		});
    	</script>
    	<script>
    		function loadPage(){
    			var first = actual;
    			var lengthVar = '&lt;%=properties.get("page", -1)%&gt;';
    			var pagination= '&lt;%=properties.get("paginate", false)%&gt;';
    			if(!pagination){
    				lengthVar=-1;
    			}
    			$.post('/bin/list', {
    				firstIndex : first,
    				length: lengthVar,
    			}, function(responseText) {
    				$('#data').html(responseText);
    			});
    		}
    		function avPag(){
    			var limit=first+lengthVar;
    			if(max<0 || limit<max){
        			actual++;
        			loadPage();	
    			}else{
    				alert("No more results to show");
    			}
    		}
    		function rePag(){
    			if(page>0){
        			actual--;
        			loadPage();	
    			}else{
    				alert("first page");
    			}
    		}
    	</script>
    </head>
    <body>
       	<cq:include script="head.jsp"/>
 		<cq:include path="parsys" resourceType="foundation/components/parsys"/>
        <div align="north">
            <cq:include path="head"  resourceType="adchall/components/headerComp" />
        </div>
        <div align="center">
            <cq:include path="content" resourceType="adchall/components/body" />
        </div>
        <div align="south">
            <cq:include path="footer" resourceType="adchall/components/footerComp" />
        </div>
    </body>
</html>